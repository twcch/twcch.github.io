document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".table-of-contents");if(!e)return;const r=e.querySelector(".table-of-contents__title");if(r){const t=document.createElement("button");t.className="table-of-contents__toggle",t.innerHTML=`
      <svg viewBox="0 0 16 16" fill="currentColor">
        <path d="M12.78 5.22a.75.75 0 010 1.06L8.06 10.94a.75.75 0 01-1.06 0L2.28 6.28a.75.75 0 011.06-1.06L8 9.88l4.66-4.66a.75.75 0 011.06 0z"/>
      </svg>
    `,t.addEventListener("click",function(){e.classList.toggle("collapsed"),this.classList.toggle("collapsed")}),r.appendChild(t)}const t=e.querySelectorAll('a[href^="#"]'),n=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");if(t.length===0||n.length===0)return;t.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href").substring(1),t=document.getElementById(n);if(t){const e=t.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"})}})});let s=!1;function o(){if(s)return;const i=window.scrollY+150;let o="";for(let e=n.length-1;e>=0;e--){const t=n[e];if(t.offsetTop<=i+100){o=t.id;break}}t.forEach(t=>{t.classList.remove("active");const n=t.getAttribute("href").substring(1);if(n===o){t.classList.add("active");const n=e.querySelector("nav");if(n&&window.innerWidth>1400){const e=n.getBoundingClientRect(),s=t.getBoundingClientRect();(s.top<e.top+50||s.bottom>e.bottom-50)&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}}})}let i;window.addEventListener("scroll",function(){i&&clearTimeout(i),i=setTimeout(o,10)}),o(),t.forEach(e=>{e.addEventListener("click",function(){s=!0,setTimeout(()=>{s=!1,o()},1e3)})});function a(){if(window.innerWidth>1400){{const t=document.querySelector(".post-title, .page-title");if(t){const s=t.getBoundingClientRect(),n=s.top+window.scrollY;window.scrollY>=n-120?(e.style.position="fixed",e.style.top="120px"):(e.style.position="absolute",e.style.top=Math.max(n-100,120)+"px")}}}else e.style.position="",e.style.top=""}setTimeout(a,100),window.addEventListener("scroll",a),window.addEventListener("resize",function(){setTimeout(a,100)}),setTimeout(()=>{e.style.opacity="1",e.style.transform="translateX(0)"},200)})