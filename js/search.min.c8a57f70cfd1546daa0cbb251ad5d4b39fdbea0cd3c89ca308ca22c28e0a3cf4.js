(function(){const o=document.getElementById("getInTouchBtn");if(!o)return;let i=[],a=!1;const s=document.getElementById("searchModal"),e=document.getElementById("searchInput"),t=document.getElementById("searchResults"),n=document.getElementById("searchEmpty");function c(){s.setAttribute("aria-hidden","false"),document.documentElement.classList.add("no-scroll"),a?setTimeout(()=>e.focus(),30):fetch("/search.json").then(e=>e.json()).then(e=>{i=e,a=!0}).catch(console.error).finally(()=>{setTimeout(()=>e.focus(),30)})}function r(){s.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("no-scroll"),e.value="",t.innerHTML="",n.style.display="none"}function l(e){if(t.innerHTML="",!e.length){n.style.display="block";return}n.style.display="none";const s=document.createDocumentFragment();e.forEach(e=>{const t=document.createElement("li");t.className="search-modal__item",t.innerHTML=`<a href="${e.permalink}">${d(e.title)}</a>`,s.appendChild(t)}),t.appendChild(s)}function d(e){return e.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]))}function u(e){const s=e.trim().toLowerCase();if(!s){t.innerHTML="",n.style.display="none";return}const o=i.filter(e=>e.title.toLowerCase().includes(s));l(o)}o.addEventListener("click",e=>{e.preventDefault(),c()}),document.addEventListener("click",e=>{e.target.closest("[data-search-close]")&&r()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s.getAttribute("aria-hidden")==="false"&&r()}),e.addEventListener("input",e=>u(e.target.value))})()