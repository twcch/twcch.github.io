<!DOCTYPE html>
<html lang="zh-tw">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <title>(Day 15) 隨機森林 (Random Forest) | 志謙&#39;s Blog</title>

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="..." crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="..." crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="..." crossorigin="anonymous"
  onload="renderMathInElement(document.body, {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ]
  });"></script>

  <meta name="description" content="">

  

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="(Day 15) 隨機森林 (Random Forest) | 志謙&#39;s Blog">
  <meta name="twitter:description" content="隨機森林是以「多棵弱學習器 (決策樹)」為基底的集成學習 (Ensemble) 方法，透過資料抽樣 (Bagging) 與特徵隨機子抽樣 (Random Subspace)  降低單棵樹的方差與不穩定性。直覺上，它像是一群專家各自投票: 每位專家 (樹) 看見的資料與特徵都不完全相同，最後以多數決 (分類) 或平均 (回歸) 給出更穩健的預測。
模型介紹
模型邏輯與核心概念

Bagging (Bootstrap Aggregating): 對原始訓練集做 有放回抽樣，為每棵樹準備一份不同的訓練子集；未被抽到的樣本稱 OOB (Out-of-Bag)，可用來近似泛化誤差。
隨機特徵子集 (max_features): 每個節點分裂時，僅在隨機抽出的特徵子集中尋找最佳分裂，打破樹之間的強相關，進一步降低方差。
投票 / 平均: 分類任務以多數決投票；回歸任務取平均值。
偏差—方差權衡: 相較單棵樹，隨機森林以增加偏差換取顯著降低方差，整體泛化表現通常更佳且更穩定。

模型建構說明

基學習器: 通常使用未剪枝或淺剪枝的 DecisionTree(Classifier|Regressor)。
訓練流程 (分類為例)

進行 B 次 bootstrap 抽樣，得到 B 個訓練子集；
對於第 b 棵樹，每個節點僅在 max_features 個隨機特徵中找最佳分裂；
訓練完成後，以 多數決 聚合各樹的預測；
可用 OOB 樣本估計泛化表現 (oob_score_)。


重要超參數 (分類)

n_estimators: 樹的數量 (越多越穩，但成本上升)
max_depth、min_samples_leaf: 限制複雜度，抑制過擬合
max_features: 每次分裂可用特徵數 (分類預設 sqrt(p) 常為穩健選擇)
class_weight: 處理類別不平衡
oob_score: 啟用 OOB 估計



模型優缺點

  
      
          優點
          缺點
      
  
  
      
          對高維與雜訊相對穩健，較不易過擬合 (相對單樹)
          訓練與推論成本高於單樹，難以極致壓縮
      
      
          幾乎不需特徵縮放，能處理數值＋類別混合
          全模型可解釋性較低 (可用特徵重要度、Permutation Importance 緩解)
      
      
          內建 OOB 評估、特徵重要度
          對極度不平衡資料仍可能偏向多數類 (需調 class_weight 或重抽樣)
      
      
          易於平行化、對超參數敏感度相對低
          單棵樹可視覺化但「整體」難以直觀解釋
      
  

模型實作
import seaborn as sns
import pandas as pd
import numpy as np

from sklearn.model_selection import train_test_split
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import OneHotEncoder
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import (
    accuracy_score, classification_report,
    roc_auc_score, average_precision_score
)
from sklearn.inspection import permutation_importance

# -----------------------------
# 1) 載入資料（無需外部檔案）
# -----------------------------
df = sns.load_dataset(&#34;titanic&#34;)

# 2) 目標與特徵（seaborn titanic 欄位）
target = &#34;survived&#34;
num_features = [&#34;age&#34;, &#34;fare&#34;, &#34;pclass&#34;, &#34;sibsp&#34;, &#34;parch&#34;]
cat_features = [&#34;sex&#34;, &#34;class&#34;, &#34;embarked&#34;, &#34;who&#34;, &#34;adult_male&#34;, &#34;alone&#34;]

X = df[num_features &#43; cat_features]
y = df[target].astype(int)

# -----------------------------
# 3) 前處理：數值補中位數、類別補眾數 &#43; One-Hot
# -----------------------------
numeric_transformer = Pipeline(steps=[
    (&#34;imputer&#34;, SimpleImputer(strategy=&#34;median&#34;))
])

categorical_transformer = Pipeline(steps=[
    (&#34;imputer&#34;, SimpleImputer(strategy=&#34;most_frequent&#34;)),
    (&#34;onehot&#34;, OneHotEncoder(handle_unknown=&#34;ignore&#34;))
])

preprocess = ColumnTransformer(
    transformers=[
        (&#34;num&#34;, numeric_transformer, num_features),
        (&#34;cat&#34;, categorical_transformer, cat_features),
    ]
)

# -----------------------------
# 4) 隨機森林模型
# -----------------------------
rf = RandomForestClassifier(
    n_estimators=400,
    max_depth=None,
    min_samples_leaf=2,
    max_features=&#34;sqrt&#34;,
    class_weight=&#34;balanced&#34;,   # Titanic 類別略不平衡
    oob_score=True,
    n_jobs=-1,
    random_state=42
)

pipe = Pipeline(steps=[(&#34;preprocess&#34;, preprocess),
                      (&#34;model&#34;, rf)])

# -----------------------------
# 5) 切分資料與訓練
# -----------------------------
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, stratify=y, random_state=42
)

pipe.fit(X_train, y_train)

# -----------------------------
# 6) 評估指標
# -----------------------------
y_pred = pipe.predict(X_test)
y_proba = pipe.predict_proba(X_test)[:, 1]

print(&#34;Test Accuracy:&#34;, round(accuracy_score(y_test, y_pred), 4))
print(classification_report(y_test, y_pred, digits=4))
print(&#34;ROC-AUC:&#34;, round(roc_auc_score(y_test, y_proba), 4))
print(&#34;PR-AUC (Average Precision):&#34;, round(average_precision_score(y_test, y_proba), 4))

rf_model = pipe.named_steps[&#34;model&#34;]
if hasattr(rf_model, &#34;oob_score_&#34;):
    print(&#34;OOB Score:&#34;, round(rf_model.oob_score_, 4))

# -----------------------------
# 7) 取得「展開後特徵名」
#    - 與模型看到的列數對齊，避免長度不一致錯誤
# -----------------------------
# One-Hot 展開後的類別名稱
ohe = pipe.named_steps[&#34;preprocess&#34;].named_transformers_[&#34;cat&#34;].named_steps[&#34;onehot&#34;]
ohe_names = list(ohe.get_feature_names_out(cat_features))
all_feature_names = num_features &#43; ohe_names

# 與模型實際特徵數對齊（保險做法）
n_model_features = rf_model.n_features_in_
if len(all_feature_names) != n_model_features:
    # 若 ColumnTransformer 產生的欄位數與推定不一致（理論上不會），則切齊
    all_feature_names = all_feature_names[:n_model_features]

# -----------------------------
# 8) 特徵重要度（MDI）
# -----------------------------
mdi_importance = pd.DataFrame({
    &#34;feature&#34;: all_feature_names,
    &#34;importance&#34;: rf_model.feature_importances_[:len(all_feature_names)]
}).sort_values(&#34;importance&#34;, ascending=False).head(20)

print(&#34;\nTop MDI Importances:&#34;)
print(mdi_importance.to_string(index=False))

# -----------------------------
# 9) Permutation Importance（在「前處理後特徵空間」計算）
#    這樣 perm.importances_* 的長度就會與 all_feature_names 完全一致
# -----------------------------
X_test_trans = pipe.named_steps[&#34;preprocess&#34;].transform(X_test)  # 稀疏或稠密皆可
estimator = pipe.named_steps[&#34;model&#34;]  # 直接用 RF 在 transformed space 上做 PI

perm = permutation_importance(
    estimator, X_test_trans, y_test,
    n_repeats=10, random_state=42, n_jobs=-1
)

perm_importance = pd.DataFrame({
    &#34;feature&#34;: all_feature_names,
    &#34;importance_mean&#34;: perm.importances_mean[:len(all_feature_names)],
    &#34;importance_std&#34;: perm.importances_std[:len(all_feature_names)],
}).sort_values(&#34;importance_mean&#34;, ascending=False).head(20)

print(&#34;\nTop Permutation Importances (transformed space):&#34;)
print(perm_importance.to_string(index=False))
執行結果
Test Accuracy: 0.8324
              precision    recall  f1-score   support

           0     0.8509    0.8818    0.8661       110
           1     0.8000    0.7536    0.7761        69

    accuracy                         0.8324       179
   macro avg     0.8254    0.8177    0.8211       179
weighted avg     0.8313    0.8324    0.8314       179

ROC-AUC: 0.8515
PR-AUC (Average Precision): 0.8335
OOB Score: 0.8216

Top MDI Importances:
         feature  importance
            fare    0.194484
             age    0.145927
adult_male_False    0.115839
 adult_male_True    0.080458
      sex_female    0.075092
         who_man    0.074631
          pclass    0.047228
        sex_male    0.046897
           sibsp    0.037505
     class_Third    0.035858
       who_woman    0.029911
     class_First    0.025534
           parch    0.022043
      embarked_S    0.017173
      embarked_C    0.011033
    class_Second    0.010601
     alone_False    0.009373
      alone_True    0.007693
      embarked_Q    0.006361
       who_child    0.006358

Top Permutation Importances (transformed space):
         feature  importance_mean  importance_std
            fare         0.070950        0.013466
             age         0.031285        0.014823
 adult_male_True         0.021788        0.008815
adult_male_False         0.021788        0.008815
         who_man         0.021788        0.008815
      embarked_S         0.012849        0.006634
     class_Third         0.006145        0.008076
      embarked_C         0.005587        0.002498
        sex_male         0.005587        0.004327
       who_woman         0.005028        0.005833
           sibsp         0.004469        0.007821
      sex_female         0.003911        0.005028
       who_child         0.003352        0.003706
           parch         0.002793        0.005151
      embarked_Q         0.001676        0.003577
          pclass        -0.000559        0.010133
    class_Second        -0.004469        0.006017
      alone_True        -0.005028        0.009497
     class_First        -0.006704        0.008939
     alone_False        -0.008939        0.008727
結果評估

整體表現

測試集 Accuracy=0.8324，相較於單棵決策樹的 0.8268 有小幅提升，且 ROC-AUC=0.8515、PR-AUC=0.8335 顯示模型在排序與正類預測能力上更穩定。OOB 分數 0.8216 與測試集表現接近，顯示隨機森林在控制方差與避免過擬合上運作正常。


類別分析

負類 (未存活) Precision=0.8509、Recall=0.8818，正類 (存活) Precision=0.8000、Recall=0.7536，雖然正類召回率較單棵樹略高，但仍有 約 24.6% 的存活樣本被誤判為未存活，在成本敏感場景下 (漏抓正類成本高) 仍需改善。


特徵重要度觀察

MDI (樹內部的 Gini 減少量): fare、age、adult_male_False/True、sex_female、who_man 是主要決策依據，且重要度分佈較單棵樹分散，顯示森林結構引入更多多樣化特徵分裂。
Permutation Importance (泛化貢獻): fare 與 age 在測試集的實際貢獻最高，其餘特徵影響幅度顯著降低，甚至有部分特徵出現負值 (打亂該特徵反而略提升模型表現，代表該特徵在測試集可能引入雜訊)。這提醒我們 MDI 可能高估某些特徵的作用，需同時參考兩種方法做解讀。



下一步建議

提升正類召回率

調整決策閾值 (predict_proba 輸出)，在 Precision 與 Recall 間找到業務可接受的平衡。
結合 class_weight 微調 (如 {0:1, 1:1.5}) 強化正類權重，觀察召回率與 FPR 的變化。


進一步驗證特徵貢獻

對前五大特徵 (fare、age、adult_male、sex_female、who_man) 繪製 Partial Dependence Plot (PDP) 或 Individual Conditional Expectation (ICE)，檢查模型對特徵變化的響應是否符合邏輯與領域知識。
移除 Permutation Importance 為負值的特徵，重新訓練模型，比較 AUC 與穩定性。


模型穩定性檢驗

使用 Stratified K-Fold (k=5 或 10) 交叉驗證回報平均值與標準差，量化隨機森林在不同資料切分下的波動性。
檢查 OOB 與交叉驗證分數的差距，確保模型泛化能力穩定。


集成與對照實驗

與 Gradient Boosting (XGBoost、LightGBM、CatBoost) 比較，特別是在正類召回率與 PR-AUC 上的表現。
若業務需求重視可解釋性，可建立 surrogate decision tree 模型近似隨機森林的決策邏輯，協助非技術人員理解。



結語
隨機森林作為一種集成學習方法，在本篇示例中展現了穩健的泛化能力與優異的整體效能。透過 Bagging 與 隨機特徵子抽樣，它有效降低了單棵決策樹易受資料擾動影響的缺點，並減少了過擬合的風險。與單樹相比，隨機森林在測試集的 Accuracy、ROC-AUC、PR-AUC 及穩定性上皆有顯著提升，且 OOB 分數與測試表現接近，反映出其在實務環境中的可靠性。">
  <meta name="twitter:image" content="http://twcch.io/images/post/common/data_science_competition_01.png">

  
  <meta property="og:title" content="(Day 15) 隨機森林 (Random Forest) | 志謙&#39;s Blog">
  <meta property="og:description" content="隨機森林是以「多棵弱學習器 (決策樹)」為基底的集成學習 (Ensemble) 方法，透過資料抽樣 (Bagging) 與特徵隨機子抽樣 (Random Subspace)  降低單棵樹的方差與不穩定性。直覺上，它像是一群專家各自投票: 每位專家 (樹) 看見的資料與特徵都不完全相同，最後以多數決 (分類) 或平均 (回歸) 給出更穩健的預測。
模型介紹
模型邏輯與核心概念

Bagging (Bootstrap Aggregating): 對原始訓練集做 有放回抽樣，為每棵樹準備一份不同的訓練子集；未被抽到的樣本稱 OOB (Out-of-Bag)，可用來近似泛化誤差。
隨機特徵子集 (max_features): 每個節點分裂時，僅在隨機抽出的特徵子集中尋找最佳分裂，打破樹之間的強相關，進一步降低方差。
投票 / 平均: 分類任務以多數決投票；回歸任務取平均值。
偏差—方差權衡: 相較單棵樹，隨機森林以增加偏差換取顯著降低方差，整體泛化表現通常更佳且更穩定。

模型建構說明

基學習器: 通常使用未剪枝或淺剪枝的 DecisionTree(Classifier|Regressor)。
訓練流程 (分類為例)

進行 B 次 bootstrap 抽樣，得到 B 個訓練子集；
對於第 b 棵樹，每個節點僅在 max_features 個隨機特徵中找最佳分裂；
訓練完成後，以 多數決 聚合各樹的預測；
可用 OOB 樣本估計泛化表現 (oob_score_)。


重要超參數 (分類)

n_estimators: 樹的數量 (越多越穩，但成本上升)
max_depth、min_samples_leaf: 限制複雜度，抑制過擬合
max_features: 每次分裂可用特徵數 (分類預設 sqrt(p) 常為穩健選擇)
class_weight: 處理類別不平衡
oob_score: 啟用 OOB 估計



模型優缺點

  
      
          優點
          缺點
      
  
  
      
          對高維與雜訊相對穩健，較不易過擬合 (相對單樹)
          訓練與推論成本高於單樹，難以極致壓縮
      
      
          幾乎不需特徵縮放，能處理數值＋類別混合
          全模型可解釋性較低 (可用特徵重要度、Permutation Importance 緩解)
      
      
          內建 OOB 評估、特徵重要度
          對極度不平衡資料仍可能偏向多數類 (需調 class_weight 或重抽樣)
      
      
          易於平行化、對超參數敏感度相對低
          單棵樹可視覺化但「整體」難以直觀解釋
      
  

模型實作
import seaborn as sns
import pandas as pd
import numpy as np

from sklearn.model_selection import train_test_split
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import OneHotEncoder
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import (
    accuracy_score, classification_report,
    roc_auc_score, average_precision_score
)
from sklearn.inspection import permutation_importance

# -----------------------------
# 1) 載入資料（無需外部檔案）
# -----------------------------
df = sns.load_dataset(&#34;titanic&#34;)

# 2) 目標與特徵（seaborn titanic 欄位）
target = &#34;survived&#34;
num_features = [&#34;age&#34;, &#34;fare&#34;, &#34;pclass&#34;, &#34;sibsp&#34;, &#34;parch&#34;]
cat_features = [&#34;sex&#34;, &#34;class&#34;, &#34;embarked&#34;, &#34;who&#34;, &#34;adult_male&#34;, &#34;alone&#34;]

X = df[num_features &#43; cat_features]
y = df[target].astype(int)

# -----------------------------
# 3) 前處理：數值補中位數、類別補眾數 &#43; One-Hot
# -----------------------------
numeric_transformer = Pipeline(steps=[
    (&#34;imputer&#34;, SimpleImputer(strategy=&#34;median&#34;))
])

categorical_transformer = Pipeline(steps=[
    (&#34;imputer&#34;, SimpleImputer(strategy=&#34;most_frequent&#34;)),
    (&#34;onehot&#34;, OneHotEncoder(handle_unknown=&#34;ignore&#34;))
])

preprocess = ColumnTransformer(
    transformers=[
        (&#34;num&#34;, numeric_transformer, num_features),
        (&#34;cat&#34;, categorical_transformer, cat_features),
    ]
)

# -----------------------------
# 4) 隨機森林模型
# -----------------------------
rf = RandomForestClassifier(
    n_estimators=400,
    max_depth=None,
    min_samples_leaf=2,
    max_features=&#34;sqrt&#34;,
    class_weight=&#34;balanced&#34;,   # Titanic 類別略不平衡
    oob_score=True,
    n_jobs=-1,
    random_state=42
)

pipe = Pipeline(steps=[(&#34;preprocess&#34;, preprocess),
                      (&#34;model&#34;, rf)])

# -----------------------------
# 5) 切分資料與訓練
# -----------------------------
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, stratify=y, random_state=42
)

pipe.fit(X_train, y_train)

# -----------------------------
# 6) 評估指標
# -----------------------------
y_pred = pipe.predict(X_test)
y_proba = pipe.predict_proba(X_test)[:, 1]

print(&#34;Test Accuracy:&#34;, round(accuracy_score(y_test, y_pred), 4))
print(classification_report(y_test, y_pred, digits=4))
print(&#34;ROC-AUC:&#34;, round(roc_auc_score(y_test, y_proba), 4))
print(&#34;PR-AUC (Average Precision):&#34;, round(average_precision_score(y_test, y_proba), 4))

rf_model = pipe.named_steps[&#34;model&#34;]
if hasattr(rf_model, &#34;oob_score_&#34;):
    print(&#34;OOB Score:&#34;, round(rf_model.oob_score_, 4))

# -----------------------------
# 7) 取得「展開後特徵名」
#    - 與模型看到的列數對齊，避免長度不一致錯誤
# -----------------------------
# One-Hot 展開後的類別名稱
ohe = pipe.named_steps[&#34;preprocess&#34;].named_transformers_[&#34;cat&#34;].named_steps[&#34;onehot&#34;]
ohe_names = list(ohe.get_feature_names_out(cat_features))
all_feature_names = num_features &#43; ohe_names

# 與模型實際特徵數對齊（保險做法）
n_model_features = rf_model.n_features_in_
if len(all_feature_names) != n_model_features:
    # 若 ColumnTransformer 產生的欄位數與推定不一致（理論上不會），則切齊
    all_feature_names = all_feature_names[:n_model_features]

# -----------------------------
# 8) 特徵重要度（MDI）
# -----------------------------
mdi_importance = pd.DataFrame({
    &#34;feature&#34;: all_feature_names,
    &#34;importance&#34;: rf_model.feature_importances_[:len(all_feature_names)]
}).sort_values(&#34;importance&#34;, ascending=False).head(20)

print(&#34;\nTop MDI Importances:&#34;)
print(mdi_importance.to_string(index=False))

# -----------------------------
# 9) Permutation Importance（在「前處理後特徵空間」計算）
#    這樣 perm.importances_* 的長度就會與 all_feature_names 完全一致
# -----------------------------
X_test_trans = pipe.named_steps[&#34;preprocess&#34;].transform(X_test)  # 稀疏或稠密皆可
estimator = pipe.named_steps[&#34;model&#34;]  # 直接用 RF 在 transformed space 上做 PI

perm = permutation_importance(
    estimator, X_test_trans, y_test,
    n_repeats=10, random_state=42, n_jobs=-1
)

perm_importance = pd.DataFrame({
    &#34;feature&#34;: all_feature_names,
    &#34;importance_mean&#34;: perm.importances_mean[:len(all_feature_names)],
    &#34;importance_std&#34;: perm.importances_std[:len(all_feature_names)],
}).sort_values(&#34;importance_mean&#34;, ascending=False).head(20)

print(&#34;\nTop Permutation Importances (transformed space):&#34;)
print(perm_importance.to_string(index=False))
執行結果
Test Accuracy: 0.8324
              precision    recall  f1-score   support

           0     0.8509    0.8818    0.8661       110
           1     0.8000    0.7536    0.7761        69

    accuracy                         0.8324       179
   macro avg     0.8254    0.8177    0.8211       179
weighted avg     0.8313    0.8324    0.8314       179

ROC-AUC: 0.8515
PR-AUC (Average Precision): 0.8335
OOB Score: 0.8216

Top MDI Importances:
         feature  importance
            fare    0.194484
             age    0.145927
adult_male_False    0.115839
 adult_male_True    0.080458
      sex_female    0.075092
         who_man    0.074631
          pclass    0.047228
        sex_male    0.046897
           sibsp    0.037505
     class_Third    0.035858
       who_woman    0.029911
     class_First    0.025534
           parch    0.022043
      embarked_S    0.017173
      embarked_C    0.011033
    class_Second    0.010601
     alone_False    0.009373
      alone_True    0.007693
      embarked_Q    0.006361
       who_child    0.006358

Top Permutation Importances (transformed space):
         feature  importance_mean  importance_std
            fare         0.070950        0.013466
             age         0.031285        0.014823
 adult_male_True         0.021788        0.008815
adult_male_False         0.021788        0.008815
         who_man         0.021788        0.008815
      embarked_S         0.012849        0.006634
     class_Third         0.006145        0.008076
      embarked_C         0.005587        0.002498
        sex_male         0.005587        0.004327
       who_woman         0.005028        0.005833
           sibsp         0.004469        0.007821
      sex_female         0.003911        0.005028
       who_child         0.003352        0.003706
           parch         0.002793        0.005151
      embarked_Q         0.001676        0.003577
          pclass        -0.000559        0.010133
    class_Second        -0.004469        0.006017
      alone_True        -0.005028        0.009497
     class_First        -0.006704        0.008939
     alone_False        -0.008939        0.008727
結果評估

整體表現

測試集 Accuracy=0.8324，相較於單棵決策樹的 0.8268 有小幅提升，且 ROC-AUC=0.8515、PR-AUC=0.8335 顯示模型在排序與正類預測能力上更穩定。OOB 分數 0.8216 與測試集表現接近，顯示隨機森林在控制方差與避免過擬合上運作正常。


類別分析

負類 (未存活) Precision=0.8509、Recall=0.8818，正類 (存活) Precision=0.8000、Recall=0.7536，雖然正類召回率較單棵樹略高，但仍有 約 24.6% 的存活樣本被誤判為未存活，在成本敏感場景下 (漏抓正類成本高) 仍需改善。


特徵重要度觀察

MDI (樹內部的 Gini 減少量): fare、age、adult_male_False/True、sex_female、who_man 是主要決策依據，且重要度分佈較單棵樹分散，顯示森林結構引入更多多樣化特徵分裂。
Permutation Importance (泛化貢獻): fare 與 age 在測試集的實際貢獻最高，其餘特徵影響幅度顯著降低，甚至有部分特徵出現負值 (打亂該特徵反而略提升模型表現，代表該特徵在測試集可能引入雜訊)。這提醒我們 MDI 可能高估某些特徵的作用，需同時參考兩種方法做解讀。



下一步建議

提升正類召回率

調整決策閾值 (predict_proba 輸出)，在 Precision 與 Recall 間找到業務可接受的平衡。
結合 class_weight 微調 (如 {0:1, 1:1.5}) 強化正類權重，觀察召回率與 FPR 的變化。


進一步驗證特徵貢獻

對前五大特徵 (fare、age、adult_male、sex_female、who_man) 繪製 Partial Dependence Plot (PDP) 或 Individual Conditional Expectation (ICE)，檢查模型對特徵變化的響應是否符合邏輯與領域知識。
移除 Permutation Importance 為負值的特徵，重新訓練模型，比較 AUC 與穩定性。


模型穩定性檢驗

使用 Stratified K-Fold (k=5 或 10) 交叉驗證回報平均值與標準差，量化隨機森林在不同資料切分下的波動性。
檢查 OOB 與交叉驗證分數的差距，確保模型泛化能力穩定。


集成與對照實驗

與 Gradient Boosting (XGBoost、LightGBM、CatBoost) 比較，特別是在正類召回率與 PR-AUC 上的表現。
若業務需求重視可解釋性，可建立 surrogate decision tree 模型近似隨機森林的決策邏輯，協助非技術人員理解。



結語
隨機森林作為一種集成學習方法，在本篇示例中展現了穩健的泛化能力與優異的整體效能。透過 Bagging 與 隨機特徵子抽樣，它有效降低了單棵決策樹易受資料擾動影響的缺點，並減少了過擬合的風險。與單樹相比，隨機森林在測試集的 Accuracy、ROC-AUC、PR-AUC 及穩定性上皆有顯著提升，且 OOB 分數與測試表現接近，反映出其在實務環境中的可靠性。">
  <meta property="og:image" content="http://twcch.io/images/post/common/data_science_competition_01.png">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,600%7CPoppins:400,600,700&display=swap" as="style">
  <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,600%7CPoppins:400,600,700&display=swap" rel="stylesheet">

  
  <link rel="preload" href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" as="style">
  <link href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" rel="stylesheet">

  
  
  <style>/*!------------------------------------------------------------------
[MAIN STYLESHEET]
-------------------------------------------------------------------*/.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.show{display:block}.hide{display:none}.invisible{visibility:hidden}.list-reset{list-style-type:none;margin:0;padding:0}.clearfix::after,.clearfix ::before{content:"";display:table;clear:both}.screen-reader-text{clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;position:absolute!important;width:1px;word-wrap:normal!important}/*!normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css*/html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,dl,dd,ol,ul,fieldset,legend,figure,hr{margin:0;padding:0}li>ul,li>ol{margin-bottom:0}table{border-collapse:collapse;border-spacing:0}h1,h2,h3,h4,h5,h6,ul,ol,dl,blockquote,p,address,hr,table,fieldset,figure,pre{margin-bottom:30px}ul,ol,dd{margin-left:20px}.highlight{color:#fff;background:#0a0a12}.highlighter-rouge .highlight{background:#eef}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:700}.highlight .o{font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:#fff}.highlight .gt{color:#a00}.highlight .kc{font-weight:700}.highlight .kd{font-weight:700}.highlight .kp{font-weight:700}.highlight .kr{font-weight:700}.highlight .kt{color:#458;font-weight:700}.highlight .m{color:#099}.highlight .s{color:#e03460}.highlight .na{color:teal}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne{color:#900;font-weight:700}.highlight .nf{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:#6565ff}.highlight .nv{color:teal}.highlight .ow{font-weight:700}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#e03460}.highlight .sc{color:#e03460}.highlight .sd{color:#e03460}.highlight .s2{color:#e03460}.highlight .se{color:#e03460}.highlight .sh{color:#e03460}.highlight .si{color:#e03460}.highlight .sx{color:#e03460}.highlight .sr{color:#009926}.highlight .s1{color:#e03460}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .il{color:#099}.container{max-width:1300px;padding-left:20px;padding-right:20px;margin:0 auto}.container-big{max-width:1600px;padding-left:20px;padding-right:20px;margin:0 auto}.row{display:flex;flex-wrap:wrap;flex:initial;flex-direction:row;box-sizing:border-box;margin-left:-15px;margin-right:-15px}.col{padding-left:15px;padding-right:15px}[class^=col-]{flex:auto}.col-0{width:0%}.col-1{width:8.33333333%}.col-2{width:16.66666667%}.col-3{width:25%}.col-4{width:33.33333333%}.col-5{width:41.66666667%}.col-6{width:50%}.col-7{width:58.33333333%}.col-8{width:66.66666667%}.col-9{width:75%}.col-10{width:83.33333333%}.col-11{width:91.66666667%}.col-12{width:100%}.push-0{margin-left:0%}.push-1{margin-left:8.33333333%}.push-2{margin-left:16.66666667%}.push-3{margin-left:25%}.push-4{margin-left:33.33333333%}.push-5{margin-left:41.66666667%}.push-6{margin-left:50%}.push-7{margin-left:58.33333333%}.push-8{margin-left:66.66666667%}.push-9{margin-left:75%}.push-10{margin-left:83.33333333%}.push-11{margin-left:91.66666667%}.push-12{margin-left:100%}.pull-0{margin-right:0%}.pull-1{margin-right:8.33333333%}.pull-2{margin-right:16.66666667%}.pull-3{margin-right:25%}.pull-4{margin-right:33.33333333%}.pull-5{margin-right:41.66666667%}.pull-6{margin-right:50%}.pull-7{margin-right:58.33333333%}.pull-8{margin-right:66.66666667%}.pull-9{margin-right:75%}.pull-10{margin-right:83.33333333%}.pull-11{margin-right:91.66666667%}.pull-12{margin-right:100%}@media(max-width:992px){.col-d-0{width:0%}.col-d-1{width:8.33333333%}.col-d-2{width:16.66666667%}.col-d-3{width:25%}.col-d-4{width:33.33333333%}.col-d-5{width:41.66666667%}.col-d-6{width:50%}.col-d-7{width:58.33333333%}.col-d-8{width:66.66666667%}.col-d-9{width:75%}.col-d-10{width:83.33333333%}.col-d-11{width:91.66666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.33333333%}.push-d-2{margin-left:16.66666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.33333333%}.push-d-5{margin-left:41.66666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.33333333%}.push-d-8{margin-left:66.66666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.33333333%}.push-d-11{margin-left:91.66666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.33333333%}.pull-d-2{margin-right:16.66666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.33333333%}.pull-d-5{margin-right:41.66666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.33333333%}.pull-d-8{margin-right:66.66666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.33333333%}.pull-d-11{margin-right:91.66666667%}.pull-d-12{margin-right:100%}}@media(max-width:768px){.col-t-0{width:0%}.col-t-1{width:8.33333333%}.col-t-2{width:16.66666667%}.col-t-3{width:25%}.col-t-4{width:33.33333333%}.col-t-5{width:41.66666667%}.col-t-6{width:50%}.col-t-7{width:58.33333333%}.col-t-8{width:66.66666667%}.col-t-9{width:75%}.col-t-10{width:83.33333333%}.col-t-11{width:91.66666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.33333333%}.push-t-2{margin-left:16.66666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.33333333%}.push-t-5{margin-left:41.66666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.33333333%}.push-t-8{margin-left:66.66666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.33333333%}.push-t-11{margin-left:91.66666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.33333333%}.pull-t-2{margin-right:16.66666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.33333333%}.pull-t-5{margin-right:41.66666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.33333333%}.pull-t-8{margin-right:66.66666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.33333333%}.pull-t-11{margin-right:91.66666667%}.pull-t-12{margin-right:100%}}@media(max-width:576px){.col-m-0{width:0%}.col-m-1{width:8.33333333%}.col-m-2{width:16.66666667%}.col-m-3{width:25%}.col-m-4{width:33.33333333%}.col-m-5{width:41.66666667%}.col-m-6{width:50%}.col-m-7{width:58.33333333%}.col-m-8{width:66.66666667%}.col-m-9{width:75%}.col-m-10{width:83.33333333%}.col-m-11{width:91.66666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.33333333%}.push-m-2{margin-left:16.66666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.33333333%}.push-m-5{margin-left:41.66666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.33333333%}.push-m-8{margin-left:66.66666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.33333333%}.push-m-11{margin-left:91.66666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.33333333%}.pull-m-2{margin-right:16.66666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.33333333%}.pull-m-5{margin-right:41.66666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.33333333%}.pull-m-8{margin-right:66.66666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.33333333%}.pull-m-11{margin-right:91.66666667%}.pull-m-12{margin-right:100%}}@media(max-width:992px){.col-d-0{width:0%}.col-d-1{width:8.33333333%}.col-d-2{width:16.66666667%}.col-d-3{width:25%}.col-d-4{width:33.33333333%}.col-d-5{width:41.66666667%}.col-d-6{width:50%}.col-d-7{width:58.33333333%}.col-d-8{width:66.66666667%}.col-d-9{width:75%}.col-d-10{width:83.33333333%}.col-d-11{width:91.66666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.33333333%}.push-d-2{margin-left:16.66666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.33333333%}.push-d-5{margin-left:41.66666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.33333333%}.push-d-8{margin-left:66.66666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.33333333%}.push-d-11{margin-left:91.66666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.33333333%}.pull-d-2{margin-right:16.66666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.33333333%}.pull-d-5{margin-right:41.66666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.33333333%}.pull-d-8{margin-right:66.66666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.33333333%}.pull-d-11{margin-right:91.66666667%}.pull-d-12{margin-right:100%}}@media(max-width:768px){.col-t-0{width:0%}.col-t-1{width:8.33333333%}.col-t-2{width:16.66666667%}.col-t-3{width:25%}.col-t-4{width:33.33333333%}.col-t-5{width:41.66666667%}.col-t-6{width:50%}.col-t-7{width:58.33333333%}.col-t-8{width:66.66666667%}.col-t-9{width:75%}.col-t-10{width:83.33333333%}.col-t-11{width:91.66666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.33333333%}.push-t-2{margin-left:16.66666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.33333333%}.push-t-5{margin-left:41.66666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.33333333%}.push-t-8{margin-left:66.66666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.33333333%}.push-t-11{margin-left:91.66666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.33333333%}.pull-t-2{margin-right:16.66666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.33333333%}.pull-t-5{margin-right:41.66666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.33333333%}.pull-t-8{margin-right:66.66666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.33333333%}.pull-t-11{margin-right:91.66666667%}.pull-t-12{margin-right:100%}}@media(max-width:576px){.col-m-0{width:0%}.col-m-1{width:8.33333333%}.col-m-2{width:16.66666667%}.col-m-3{width:25%}.col-m-4{width:33.33333333%}.col-m-5{width:41.66666667%}.col-m-6{width:50%}.col-m-7{width:58.33333333%}.col-m-8{width:66.66666667%}.col-m-9{width:75%}.col-m-10{width:83.33333333%}.col-m-11{width:91.66666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.33333333%}.push-m-2{margin-left:16.66666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.33333333%}.push-m-5{margin-left:41.66666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.33333333%}.push-m-8{margin-left:66.66666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.33333333%}.push-m-11{margin-left:91.66666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.33333333%}.pull-m-2{margin-right:16.66666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.33333333%}.pull-m-5{margin-right:41.66666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.33333333%}.pull-m-8{margin-right:66.66666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.33333333%}.pull-m-11{margin-right:91.66666667%}.pull-m-12{margin-right:100%}}@media(max-width:992px){.col-d-0{width:0%}.col-d-1{width:8.33333333%}.col-d-2{width:16.66666667%}.col-d-3{width:25%}.col-d-4{width:33.33333333%}.col-d-5{width:41.66666667%}.col-d-6{width:50%}.col-d-7{width:58.33333333%}.col-d-8{width:66.66666667%}.col-d-9{width:75%}.col-d-10{width:83.33333333%}.col-d-11{width:91.66666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.33333333%}.push-d-2{margin-left:16.66666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.33333333%}.push-d-5{margin-left:41.66666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.33333333%}.push-d-8{margin-left:66.66666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.33333333%}.push-d-11{margin-left:91.66666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.33333333%}.pull-d-2{margin-right:16.66666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.33333333%}.pull-d-5{margin-right:41.66666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.33333333%}.pull-d-8{margin-right:66.66666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.33333333%}.pull-d-11{margin-right:91.66666667%}.pull-d-12{margin-right:100%}}@media(max-width:768px){.col-t-0{width:0%}.col-t-1{width:8.33333333%}.col-t-2{width:16.66666667%}.col-t-3{width:25%}.col-t-4{width:33.33333333%}.col-t-5{width:41.66666667%}.col-t-6{width:50%}.col-t-7{width:58.33333333%}.col-t-8{width:66.66666667%}.col-t-9{width:75%}.col-t-10{width:83.33333333%}.col-t-11{width:91.66666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.33333333%}.push-t-2{margin-left:16.66666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.33333333%}.push-t-5{margin-left:41.66666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.33333333%}.push-t-8{margin-left:66.66666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.33333333%}.push-t-11{margin-left:91.66666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.33333333%}.pull-t-2{margin-right:16.66666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.33333333%}.pull-t-5{margin-right:41.66666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.33333333%}.pull-t-8{margin-right:66.66666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.33333333%}.pull-t-11{margin-right:91.66666667%}.pull-t-12{margin-right:100%}}@media(max-width:576px){.col-m-0{width:0%}.col-m-1{width:8.33333333%}.col-m-2{width:16.66666667%}.col-m-3{width:25%}.col-m-4{width:33.33333333%}.col-m-5{width:41.66666667%}.col-m-6{width:50%}.col-m-7{width:58.33333333%}.col-m-8{width:66.66666667%}.col-m-9{width:75%}.col-m-10{width:83.33333333%}.col-m-11{width:91.66666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.33333333%}.push-m-2{margin-left:16.66666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.33333333%}.push-m-5{margin-left:41.66666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.33333333%}.push-m-8{margin-left:66.66666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.33333333%}.push-m-11{margin-left:91.66666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.33333333%}.pull-m-2{margin-right:16.66666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.33333333%}.pull-m-5{margin-right:41.66666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.33333333%}.pull-m-8{margin-right:66.66666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.33333333%}.pull-m-11{margin-right:91.66666667%}.pull-m-12{margin-right:100%}}img[data-action=zoom]{cursor:pointer;cursor:-webkit-zoom-in;cursor:-moz-zoom-in}.zoom-img,.zoom-img-wrap{position:relative;z-index:666;-webkit-transition:all 300ms;-o-transition:all 300ms;transition:all 300ms}img.zoom-img{cursor:pointer;cursor:-webkit-zoom-out;cursor:-moz-zoom-out}.zoom-overlay{z-index:420;background:#16151f;position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;opacity:0;-webkit-transition:opacity 300ms;-o-transition:opacity 300ms;transition:opacity 300ms}@supports(-webkit-backdrop-filter:none) or (backdrop-filter:none){.zoom-overlay{-webkit-backdrop-filter:saturate(180%)blur(10px);backdrop-filter:saturate(180%)blur(10px);background:rgba(22,21,31,.8)}}.zoom-overlay-open .zoom-overlay{opacity:1}.zoom-overlay-open,.zoom-overlay-transitioning{cursor:default}.animate{animation:animateElement cubic-bezier(.3,.45,.45,.95).75s;animation-duration:.75s;animation-iteration-count:1;transition:transform .2s}@keyframes animateElement{0%{opacity:0;transform:translate(0,50px)}100%{opacity:1;transform:translate(0,0)}}*,*::after,*::before{box-sizing:border-box}body{font-family:josefin sans,sans-serif;font-size:18px;line-height:1.7;color:#fff;background-color:#16151f;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden}body.is-in::after{visibility:hidden;opacity:0;pointer-events:none}body::after{content:"";position:fixed;left:0;top:0;width:100%;height:100%;background-color:#0a0a12;z-index:999;transition:1s}body input,body textarea{border:1px solid #c6c6c6;outline:none}@media only screen and (max-width:576px){body{font-size:16px;line-height:29px}}::placeholder{color:#757575}*::selection{color:#fff;background-color:rgba(50,58,150,.7)}h1,h2,h3,h4,h5,h6{font-family:poppins,Arial,sans-serif;font-weight:700;line-height:1.4em;color:#fff}h1{font-size:36px}h2{font-size:28px}h3{font-size:24px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}blockquote{position:relative;padding:20px 20px 20px 45px;font-family:poppins,Arial,sans-serif;font-size:21px;line-height:37px;font-weight:700;color:#fff}blockquote:before{content:'\201C';position:absolute;font-family:poppins,Arial,sans-serif;top:.3em;left:-.01em;font-size:4em;color:rgba(255,255,255,.6)}blockquote cite{font-size:16px;font-style:normal;color:#fff}blockquote cite:before{content:'\2014' '\00a0'}@media only screen and (max-width:576px){blockquote{padding:20px 20px 20px 35px;font-size:18px;line-height:28px}}pre{overflow:auto;padding:15px;font-size:14px;white-space:pre-wrap;word-wrap:break-word;word-break:break-all}code[class*=language-],pre[class*=language-]{white-space:pre-wrap;word-break:break-all;line-height:inherit}img,.zoom-img-wrap{max-width:100%;height:auto;vertical-align:middle}img+em,.zoom-img-wrap+em{display:inline-block;width:100%;padding:13px;font-size:14px;font-style:normal;line-height:1;text-align:center;color:rgba(255,255,255,.8);background-color:#0a0a12}a{text-decoration:none;color:#fff;transition:all .2s}a:hover{color:#323a96}hr{display:block;width:100%;height:1px;margin:50px 0;border:0;background:rgba(255,255,255,.1)}.table-container{display:block;max-width:100%;overflow-x:auto}table{font-size:12px;color:rgba(255,255,255,.6);width:100%;border-width:1px;border-color:#0a0a12;border-collapse:collapse}table th{padding:10px;font-size:16px;text-align:left;border:1px solid #0a0a12;color:#fff;background-color:#323a96}table tr{background-color:#0a0a12;transition:all .3s ease}table tr:nth-child(even){background-color:transparent}table td{padding:10px;font-size:14px;border:1px solid #0a0a12}table tr:hover{color:#fff}.gallery-box{margin-bottom:30px}.gallery-box em{display:inline-block;width:100%;padding:13px;font-size:14px;font-style:normal;line-height:1;text-align:center;color:rgba(255,255,255,.8);background-color:#0a0a12}.gallery-box em a{text-decoration:underline;border-bottom:none}.gallery{display:grid;grid-template-columns:repeat(3,auto);justify-content:center;align-content:center;grid-gap:10px}.gallery img{width:100%;height:auto}.hero{position:relative;margin-bottom:30px;border-radius:30px;overflow:hidden;box-shadow:0 5px 10px rgba(0,0,0,.15);background-color:#0a0a12}@media only screen and (max-width:992px){.hero{border-radius:30px}}@media only screen and (max-width:576px){.hero{box-shadow:none}}.hero__inner::before{content:"";display:block;position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;border-radius:30px;background-color:rgba(16,17,30,.6)}@media only screen and (max-width:992px){.hero__inner::before{border-radius:30px}}.hero__image{padding-top:50%;min-height:280px;user-select:none}.hero__image img{position:absolute;top:0;width:100%;height:100%;object-fit:cover}@media only screen and (max-width:992px){.hero__image{padding-top:55%}}@media only screen and (max-width:768px){.hero__image{padding-top:65%}}.hero__content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;width:100%;max-width:650px;padding:0 20px;text-align:center}.hero__title{font-size:57px;margin:0 0 10px;color:#fff}@media only screen and (max-width:576px){.hero__title{font-size:43px;margin:0 0 5px}}.hero__desc{font-size:18px;color:rgba(255,255,255,.8);margin:0}@media only screen and (max-width:576px){.hero__desc{font-size:15px;line-height:21px}}.hero-without-image{margin:50px 0 80px}.hero-without-image .hero-inner{display:flex;align-items:center;justify-content:center}.hero-without-image .hero-content{width:100%;max-width:650px;padding:0 20px;text-align:center}@media only screen and (max-width:576px){.hero-without-image{margin:20px 0 50px}}.top{position:fixed;bottom:25px;right:-100px;z-index:5;width:40px;height:40px;line-height:40px;text-align:center;border-radius:5px;background-color:#0a0a12;color:#fff;cursor:pointer;transition:all .25s ease}.top.is-active{right:30px}@media only screen and (max-width:768px){.top{bottom:15px}.top.is-active{right:25px}}.header{width:100%;margin:35px 0;transition:all .2s;color:#fff}@media only screen and (max-width:992px){.header{margin:25px 0}}.header__inner{position:relative;display:flex;justify-content:space-between;align-items:center}.logo__link{font-family:poppins,Arial,sans-serif;font-size:27px;line-height:1;font-weight:700;vertical-align:middle;color:#fff;text-transform:uppercase;text-decoration:none;letter-spacing:2px;transition:none}.logo__link:hover{color:#fff}.logo__image{max-height:40px}.main-nav{width:100%;max-width:1300px;margin:0 auto}.main-nav__box{display:flex;align-items:center;width:80%;padding-top:200px;margin:0 auto}.main-nav__box .nav__icon-close{position:absolute;top:20px;right:40px;z-index:5;display:flex;align-items:center;justify-content:center;font-size:30px;width:40px;height:40px;text-align:center;line-height:40px;color:rgba(255,255,255,.5);transition:all .25s ease;cursor:pointer}.main-nav__box .nav__icon-close:hover{color:#fff}@media only screen and (max-width:768px){.main-nav__box{padding-top:100px}.main-nav__box .nav__icon-close{top:22px;right:42px}}@media only screen and (max-width:576px){.main-nav__box{width:90%}}.navigation{display:flex;align-items:center}.top-nav{margin-right:25px}.top-nav .nav__list .nav__item{display:inline-block;margin-right:25px}.top-nav .nav__list .nav__item:last-child{margin-right:0}.top-nav .nav__list .nav__item .nav__link{position:relative;font-size:16px;font-weight:400;text-decoration:none;color:#fff}.top-nav .nav__list .nav__item .nav__link:hover::before{opacity:1;visibility:visible}.top-nav .nav__list .nav__item .nav__link::before{content:"";position:absolute;left:50%;top:-15px;transform:translateX(-50%);display:block;width:7px;height:7px;border-radius:50%;transition:all .25s;opacity:0;visibility:hidden;background-color:#323a96}@media only screen and (max-width:992px){.top-nav{display:none}}.mobile-nav .nav__list .nav__item{display:block;margin-bottom:35px;text-align:center}.mobile-nav .nav__list .nav__item:last-child{margin-bottom:0}.mobile-nav .nav__list .nav__item .nav__link{position:relative;font-size:18px;color:#fff}@media only screen and (max-width:576px){.mobile-nav .nav__list .nav__item{margin-bottom:20px}}.nav-buttons{display:flex;align-items:center;font-size:24px;color:#fff}.nav-buttons .nav__icon-menu{display:none}@media only screen and (max-width:992px){.nav-buttons .nav__icon-menu{display:block}}.nav-buttons .nav__icon{cursor:pointer}.nav-buttons .nav__icon:first-child{margin-right:15px}.menu-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-1;opacity:0;visibility:hidden;background-color:#0a0a12;transition:all .5s ease-in-out}.menu-overlay.is-open{z-index:100;opacity:1;visibility:visible}@supports(-webkit-backdrop-filter:none) or (backdrop-filter:none){.menu-overlay{-webkit-backdrop-filter:saturate(180%)blur(10px);backdrop-filter:saturate(180%)blur(10px);background-color:rgba(10,10,18,.9)}}@media only screen and (min-width:992px){.menu-overlay{display:none}}.nav-grid{width:100%;height:75vh;overflow-y:auto}.nav-grid__item{margin-bottom:30px}@media only screen and (max-width:768px){.nav-grid__item{height:auto}}.nav-grid__title{position:relative;margin-bottom:50px;padding-bottom:15px;font-size:30px;font-weight:700;text-align:center;color:#fff}.nav-grid__title::after{content:"";position:absolute;left:50%;bottom:0;transform:translate(-50%,-50%);display:block;width:25px;height:2px;background-color:#fff}@media only screen and (max-width:768px){.nav-grid__title{margin-bottom:30px}}.search{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-1;opacity:0;visibility:hidden;background-color:#0a0a12;transition:all .5s ease-in-out}.search.is-visible{z-index:100;opacity:1;visibility:visible}@supports(-webkit-backdrop-filter:none) or (backdrop-filter:none){.search{-webkit-backdrop-filter:saturate(180%)blur(10px);backdrop-filter:saturate(180%)blur(10px);background-color:rgba(10,10,18,.9)}}.search__box{position:relative;max-width:650px;width:100%;margin:0 auto;padding-top:200px}.search__box .search__close{position:absolute;top:50%;right:20px;transform:translateY(-50%);font-size:30px;line-height:1;color:rgba(255,255,255,.5);transition:all .25s;cursor:pointer}.search__box .search__close:hover{color:#fff}@media only screen and (max-width:768px){.search__box{width:80%;padding-top:100px}}@media only screen and (max-width:576px){.search__box{width:90%}}.search__group{position:relative;margin-bottom:30px}.search__group .search__text{width:100%;height:auto;padding:15px 20px;font-family:poppins,Arial,sans-serif;font-size:28px;font-weight:700;line-height:42px;border-radius:5px;border:3px solid rgba(255,255,255,.5);transition:all .3s;color:#fff;background-color:transparent}.search__group .search__text::-webkit-input-placeholder{font-weight:700;color:rgba(255,255,255,.5)}.search__group .search__text::placeholder{font-weight:700;color:rgba(255,255,255,.5)}.search__group .search__text::-ms-clear{display:none}.search__group .search__text:focus{color:#fff;border-color:#323a96}@media only screen and (max-width:576px){.search__group .search__text{font-size:26px}}.search-results-list{height:55vh;padding:0 0 25px;list-style:circle;font-weight:700;color:#fff;overflow:auto;white-space:normal}.search-results-list .search-counter{margin-left:5px}.search-results-list .search-results__item{padding-bottom:15px;margin-bottom:15px;display:list-item;list-style-type:none;border-bottom:1px solid rgba(255,255,255,.1)}.search-results-list .search-results__link{position:relative;display:block;margin-left:-15px;padding-left:20px;font-size:18px;line-height:24px;font-weight:700;color:#fff;transition:all .25s ease-in-out}.search-results-list .search-results__link:hover{margin-left:15px}.search-results-list .search-results__link::before{content:"";position:absolute;top:6px;left:0;width:7px;height:7px;border-radius:50%;border:1px solid #fff}.search-results-list .search-results-date{font-size:12px;line-height:1;font-weight:400;color:rgba(255,255,255,.6)}.search-results-list .no-results{list-style:none}.search-results-list .no-results h3{font-size:18px}.load-more{margin:0 auto}.load-more-section{margin:30px auto;text-align:center}@media only screen and (max-width:576px){.load-more-section{margin:20px auto}}.load-more-posts i{margin-left:5px}.footer-widgets{padding:80px 0 30px;margin-top:20px;background-color:#0a0a12}.footer-widgets .row .col{flex-grow:1}.footer-widgets .row .col:last-child>.widget{padding-right:0}@media only screen and (max-width:768px){.footer-widgets{padding:80px 0 0}}@media only screen and (max-width:576px){.footer-widgets{padding:50px 0 0}}@media only screen and (max-width:768px){.widget{margin-bottom:60px}}.widget__title{position:relative;margin-bottom:20px;font-size:30px;line-height:1;color:#fff}@media only screen and (max-width:992px){.widget__title{font-size:24px}}.footer-logo{margin-bottom:20px;font-family:Poppins,Arial,sans-serif;font-size:27px;line-height:33px;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:2px;transition:none}.footer-desc{margin-bottom:0;font-size:16px;line-height:24px;color:rgba(255,255,255,.6)}.widget-nav{padding-right:30px}.widget-nav .nav__item{margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.1)}.widget-nav .nav__item:last-child{margin-bottom:0}.widget-nav .nav__link{font-size:16px;color:#fff}@media only screen and (max-width:992px){.widget-nav{padding-right:0}}@media only screen and (max-width:768px){.widget-subscribe{margin-bottom:0}}.subscribe-subtitle{width:100%;margin-bottom:20px;font-size:16px;line-height:26px;color:rgba(255,255,255,.6)}@media only screen and (max-width:768px){.subscribe-subtitle{max-width:100%}}.subscribe-group-top{display:flex;align-items:center}.subscribe-group-top .subscribe-email{position:relative;width:100%;height:50px;padding:8px 15px;font-family:poppins,Arial,sans-serif;font-size:13px;border-radius:5px;line-height:50px;color:#0a0a12;background-color:#fff;border:1px solid #c6c6c6;outline:0;-webkit-appearance:none;box-sizing:border-box;transition:border-color .2s ease-in-out;cursor:text}.subscribe-group-top .subscribe-button{margin-left:10px}.footer{position:relative;padding:50px 0;background-color:#0a0a12}.footer .footer__inner{display:flex;justify-content:space-between;align-items:center}@media only screen and (max-width:768px){.footer .footer__inner{flex-direction:column;align-items:flex-start}}.copyright{font-size:13px;color:rgba(255,255,255,.6)}.copyright a{color:#fff}.social{text-align:center}.social .social__list{display:flex;flex-wrap:wrap;justify-content:center;align-items:center}.social .social__item{display:inline-block;margin-left:10px}.social .social__item:first-child{margin-left:0}.social .social__link{display:flex;justify-content:center;align-items:center;width:40px;height:40px;font-size:18px;line-height:40px;border-radius:3px;color:#fff;background-color:#16151f}.social .social__link:hover{background-color:#323a96}@media only screen and (max-width:992px){.social .social__link{width:30px;height:30px;line-height:30px;font-size:16px}}@media only screen and (max-width:768px){.social{margin-bottom:5px}.social .social__item{margin-bottom:10px}}.button{display:inline-block;white-space:nowrap;vertical-align:middle;font:inherit;border:none;border-radius:5px;outline:none;-webkit-appearance:none;text-align:center;text-decoration:none;color:#fff;transition:all .2s ease;cursor:pointer}.button:hover{color:#fff}.button--primary{padding:0 1.8rem;height:50px;font-size:16px;font-weight:600;line-height:50px;background-color:#323a96}.button--primary:hover{background-color:#2c3383}.button--middle{position:relative;height:60px;width:100%;max-width:280px;font-family:poppins,Arial,sans-serif;font-size:12px;line-height:60px;font-weight:600;letter-spacing:1px;text-transform:uppercase;transition:all .2s ease;background-color:#0a0a12}.button--middle:hover{background-color:#08080f}.button--small{height:28px;line-height:28px;display:inline-block;border-radius:30px;padding:0 15px;color:#fff;background-color:#323a96}.button--small:hover{background-color:#2c3383}.button--small::before{content:none!important}.button--big{display:block;width:100%}.article{align-items:stretch;flex-grow:1;min-height:380px;margin-bottom:30px}.article:hover{transform:translateY(-5px)}@media only screen and (max-width:576px){.article{min-height:280px}}.article__inner{position:relative;display:flex;width:100%;height:100%;border-radius:30px;overflow:hidden;box-shadow:0 5px 10px rgba(0,0,0,.15);background-color:#0a0a12}.article__inner .featured-post{position:absolute;top:0;right:0;z-index:10;width:35px;height:35px;display:flex;justify-content:center;align-items:center;font-size:18px;color:rgba(255,255,255,.8);user-select:none}.article__inner .featured-post::before{content:"";position:absolute;top:0;right:0;width:100%;height:100%;border-color:#323a96 #323a96 transparent transparent;border-style:solid;border-width:29px}.article__inner .featured-post i{position:relative}.article__title{margin:10px 0 15px;font-size:21px}.article__title a{color:#fff}@media only screen and (max-width:576px){.article__title{margin:5px 0 10px;font-size:18px}}.article__excerpt{margin-bottom:15px;font-size:15px;color:rgba(255,255,255,.6)}.article__excerpt p{margin:0}@media only screen and (max-width:576px){.article__excerpt{margin-bottom:10px;font-size:13px;line-height:21px}}.article__image{position:absolute;display:block;width:100%;height:100%;overflow:hidden;user-select:none;background-color:#0a0a12}.article__image::after{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(16,17,30,.6);pointer-events:none}.article__image img{position:absolute;top:0;width:100%;height:100%;object-fit:cover;pointer-events:none}@media only screen and (max-width:768px){.article__image{padding-top:75%}}@media only screen and (max-width:576px){.article__image{padding-top:80%}}.article__content{z-index:1;width:100%;margin-top:auto;padding:0 30px 30px}@media only screen and (max-width:576px){.article__content{padding:20px}}.article__meta{display:flex;align-items:center;flex-wrap:wrap;justify-content:flex-start;color:#fff}.article-tags{display:flex;flex-wrap:wrap;align-items:center}.article-tags__box{position:relative;display:flex;flex-wrap:wrap;align-items:center;line-height:1}.article-tags__box .article__tag{height:23px;padding:0 10px;margin:0 5px 5px 0;text-transform:uppercase;font-family:poppins,Arial,sans-serif;font-size:10px;line-height:23px;letter-spacing:1px;font-weight:700;border-radius:30px;color:rgba(255,255,255,.9);background-color:#323a96}.article-tags__box .article__tag:hover{background-color:#2c3383}.article-tags__box .article__tag:last-child{margin-right:0}@media only screen and (max-width:576px){.article-tags__box .article__tag{height:20px;line-height:20px}}.article__date{font-size:14px;color:#fff}.article__date::before{content:"";position:relative;bottom:.2rem;display:inline-block;height:3px;width:3px;margin:0 .5rem;border-radius:50%;background-color:rgba(255,255,255,.8)}@media only screen and (max-width:576px){.article__date{display:none}}.article__author{display:flex;align-items:center}.article__author-image{display:inline-block;width:25px;height:25px;margin-right:7px;border-radius:50%;border:1px solid rgba(255,255,255,.6);background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#0a0a12}.article__author-link{font-size:14px;text-decoration:underline;color:#fff}.article__author-link:hover{color:#fff}.article__author span{color:rgba(255,255,255,.8)}.post{position:relative;margin-bottom:30px}.post-image{position:absolute;top:0;width:100%;height:100%;object-fit:cover;user-select:none}.image-box{position:relative;padding-top:50%;min-height:280px;border-radius:30px;overflow:hidden;box-shadow:0 5px 10px rgba(0,0,0,.15);background-color:#0a0a12}@media only screen and (max-width:992px){.image-box{padding-top:55%}}@media only screen and (max-width:768px){.image-box{padding-top:65%}}.post__tags{position:relative;display:flex;justify-content:center;flex-wrap:wrap}.post__tags .post-tags__tag{height:23px;margin-right:5px;margin-bottom:5px;padding:0 10px;text-transform:uppercase;font-family:poppins,Arial,sans-serif;font-size:10px;line-height:23px;letter-spacing:1px;font-weight:700;border-radius:30px;color:rgba(255,255,255,.9);background-color:#323a96}.post__tags .post-tags__tag:hover{background-color:#2c3383}.post__tags .post-tags__tag:last-child{margin-right:0}@media only screen and (max-width:576px){.post__tags .post-tags__tag{height:20px;line-height:20px}}.post__head{margin:40px 0}.post__title{font-size:43px;margin:10px 0 15px;text-align:center}@media only screen and (max-width:768px){.post__title{font-size:38px}}@media only screen and (max-width:576px){.post__title{font-size:28px}}.post__meta{display:flex;align-items:center;flex-wrap:wrap;justify-content:center;color:#fff}.post__author{display:flex;align-items:center}.post__author-image{display:inline-block;width:25px;height:25px;margin-right:7px;border-radius:50%;border:1px solid rgba(255,255,255,.6);background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#0a0a12}.post__author-link{font-size:14px;text-decoration:underline;color:#fff}.post__author-link:hover{color:#fff}.post__author span{color:rgba(255,255,255,.8)}.post__date{font-size:14px;color:#fff}.post__date::before{content:"";position:relative;bottom:.2rem;display:inline-block;height:3px;width:3px;margin:0 .5rem;border-radius:50%;background-color:rgba(255,255,255,.8)}.post__content{color:rgba(255,255,255,.6)}.post__content a:hover{color:#fff;text-decoration:underline}.post__share{margin-bottom:80px}.post__share .share__head{text-align:center}.post__share .share__title{position:relative;display:inline-block;margin-bottom:25px;font-family:poppins,Arial,sans-serif;font-size:15px;font-weight:700;letter-spacing:1px;text-align:center;text-transform:uppercase}.post__share .share__list{display:flex;justify-content:center;align-items:center;width:100%}.post__share .share__item{margin:0 5px;text-align:center}.post__share .share__link{display:flex;justify-content:center;align-items:center;width:30px;height:30px;line-height:30px;border-radius:50%;font-size:16px;color:#0a0a12;background-color:#fff;transition:all .2s}.post__share .share__link:hover.share__facebook{color:#3b5998}.post__share .share__link:hover.share__twitter{color:#55acee}.post__share .share__link:hover.share__linkedin{color:#0077b5}.post__share .share__link:hover.share__pinterest{color:#bd081c}@media only screen and (max-width:576px){.post__share{margin-bottom:50px}}.post__navigation{display:flex;justify-content:space-between;margin-bottom:50px}.post__navigation a:first-child{margin-right:4%}.post__navigation a:last-child{margin-right:0}.post__navigation .prev,.post__navigation .next{position:relative;display:flex;align-items:flex-end;width:100%;min-height:230px;padding:0 25px 25px;border-radius:30px;overflow:hidden;transition:transform .2s,-webkit-transform .2s;box-shadow:0 5px 10px rgba(0,0,0,.15);background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#0a0a12}.post__navigation .prev::after,.post__navigation .next::after{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(16,17,30,.6);pointer-events:none}.post__navigation .prev:hover,.post__navigation .next:hover{transform:translateY(-5px)}.post__navigation .prev .post__nav,.post__navigation .next .post__nav{display:inline-block;margin-bottom:5px;font-size:13px;font-family:poppins,Arial,sans-serif;letter-spacing:1px;text-transform:uppercase;color:rgba(255,255,255,.8)}.post__navigation .prev .post__nav-box,.post__navigation .next .post__nav-box{position:relative;z-index:1;width:100%}.post__navigation .prev .post__nav__title,.post__navigation .next .post__nav__title{margin-bottom:0;font-size:21px}.post__navigation .prev .post__nav__title a,.post__navigation .next .post__nav__title a{color:#fff}.post__navigation .next{text-align:right;margin-left:auto}@media only screen and (max-width:768px){.post__navigation{flex-wrap:wrap}.post__navigation .prev,.post__navigation .next{width:100%}.post__navigation .prev{margin-bottom:20px}}.post__comments{margin-bottom:20px}.page{position:relative;margin-bottom:30px}.page__title{font-size:43px;margin-bottom:20px;text-align:center}@media only screen and (max-width:768px){.page__title{font-size:38px}}@media only screen and (max-width:768px){.page__title{font-size:28px}}.page-image{position:absolute;top:0;width:100%;height:100%;object-fit:cover;user-select:none}.image-box{position:relative;padding-top:50%;border-radius:30px;overflow:hidden;background-color:#0a0a12}@media only screen and (max-width:992px){.image-box{padding-top:55%}}@media only screen and (max-width:768px){.image-box{padding-top:65%}}.page__head{margin:40px 0}.page__content{color:rgba(255,255,255,.6)}.page__content a:hover{color:#fff;text-decoration:underline}.error{margin-bottom:0;text-align:center}.error .error__title{margin:24px 0;font-size:120px;line-height:1}.error .error__text{margin-bottom:48px;color:var(--text-alt-color)}@media only screen and (max-width:576px){.error .error__title{font-size:68px}.error .error__title{font-size:80px}.error .error__text{margin-bottom:24px}}.archive-box{position:relative;margin:50px 0 80px;text-align:center}@media only screen and (max-width:576px){.archive-box{margin:20px 0 50px}}.archive-counter{font-size:16px}.archive-title{position:relative;margin:0;font-size:47px;line-height:57px;text-transform:capitalize}@media only screen and (max-width:576px){.archive-title{font-size:40px;line-height:52px}}.form__group{margin-bottom:20px}.form__label{display:inline-block;margin-bottom:5px;font-family:poppins,Arial,sans-serif;font-size:14px;font-weight:600}.form__input{width:100%;padding:15px;font-family:poppins,Arial,sans-serif;font-size:14px;border-radius:5px}</style>
  

</head>

<body>

  

  
<header class="header">
  <div class="container">
    <div class="row">
      <div class="header__inner col col-12">

        <div class="logo">
          <a class="logo__link" href="http://twcch.io/">
            
              志謙&#39;s Blog
            
          </a>
        </div>

        <div class="menu-overlay">
          <nav class="main-nav">
            <div class="main-nav__box">
              <div class="nav__icon-close">
                <i class="ion ion-md-close"></i>
              </div>
              <div class="nav-grid">
                <div class="nav-grid__item">
                  <h2 class="nav-grid__title">Menu</h2>
                  <div class="mobile-nav">
                    <ul class="nav__list list-reset">
                      
                      <li class="nav__item">
                        <a href="/" class="nav__link">首頁</a>
                      </li>
                      
                      <li class="nav__item">
                        <a href="/about" class="nav__link">關於我</a>
                      </li>
                      
                      <li class="nav__item">
                        <a href="/tags/project" class="nav__link">個人專案</a>
                      </li>
                      
                      <li class="nav__item">
                        <a href="/column_article" class="nav__link">專欄文章</a>
                      </li>
                      
                      <li class="nav__item">
                        <a href="/posts" class="nav__link">所有文章</a>
                      </li>
                      
                      <li class="nav__item">
                        <a href="/contact" class="nav__link">聯絡我</a>
                      </li>
                      
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </nav>
        </div>

        <div class="navigation">
          <div class="top-nav">
            <ul class="nav__list list-reset">
              
              <li class="nav__item">
                <a href="/" class="nav__link">首頁</a>
              </li>
              
              <li class="nav__item">
                <a href="/about" class="nav__link">關於我</a>
              </li>
              
              <li class="nav__item">
                <a href="/tags/project" class="nav__link">個人專案</a>
              </li>
              
              <li class="nav__item">
                <a href="/column_article" class="nav__link">專欄文章</a>
              </li>
              
              <li class="nav__item">
                <a href="/posts" class="nav__link">所有文章</a>
              </li>
              
              <li class="nav__item">
                <a href="/contact" class="nav__link">聯絡我</a>
              </li>
              
            </ul>
          </div>
          <div class="nav-buttons">
            <i class="nav__icon nav__icon-menu ion ion-md-menu"></i>
            <i class="nav__icon nav__icon-search ion ion-md-search"></i>
          </div>
        </div>

      </div>
    </div>
  </div>
</header>



<div class="search">
  <div class="container">
    <div class="row">
      <div class="col col-12">
        <div class="search__box">
          <div class="search__group">
            <div class="search__close">
              <i class="ion ion-md-close"></i>
            </div>
            <label for="js-search-input" class="screen-reader-text">搜尋文章</label>
            <input type="text" id="js-search-input" class="search__text" autocomplete="off" placeholder="搜尋文章">
          </div>
          <div id="js-results-container" class="search-results-list" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>
</div>


  
  <main class="content" aria-label="Content">
    




<div class="container">
  <div class="row">
    <div class="col col-12">
      <div class="image-box">
        <img class="post-image" src="http://twcch.io/images/post/common/data_science_competition_01.png" alt="(Day 15) 隨機森林 (Random Forest)">
      </div>
    </div>
  </div>
</div>


<div class="container">

  <div class="row">
    <div class="col col-8 col-d-10 push-2 push-d-1 col-t-12 push-t-0">
    
      
      <article class="post amimate">

        <div class="post__head">
          
          <div class="post__tags">
            
            <a href="http://twcch.io/tags/data-science/" class="post-tags__tag">Data Science</a>
            
            <a href="http://twcch.io/tags/ithome-%E9%90%B5%E4%BA%BA%E8%B3%BD-2025/" class="post-tags__tag">IThome 鐵人賽 2025</a>
            
            <a href="http://twcch.io/tags/30-%E5%A4%A9%E5%85%A5%E9%96%80%E5%B8%B8%E8%A6%8B%E7%9A%84%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92%E6%BC%94%E7%AE%97%E6%B3%95/" class="post-tags__tag">30 天入門常見的機器學習演算法</a>
            
          </div>
          

          <h1 class="post__title">(Day 15) 隨機森林 (Random Forest)</h1>

          <div class="post__meta">
            <div class="post__author">
              <a href="/about/" class="post__author-image" style="background-image: url('http://twcch.io/images/avatar.jpg')" aria-label="謝志謙's Picture"></a> <a href="/about/" class="post__author-link">謝志謙</a>
            </div>
            <span class="post__date">
              <time datetime=" 2025-08-13T00:00:00&#43;08:00">Aug 13, 2025</time>
            </span>
          </div>

        </div>
    
        <div class="post__content">
          <p>隨機森林是以「多棵弱學習器 (決策樹)」為基底的集成學習 (Ensemble) 方法，透過資料抽樣 (Bagging) 與特徵隨機子抽樣 (Random Subspace)  降低單棵樹的方差與不穩定性。直覺上，它像是一群專家各自投票: 每位專家 (樹) 看見的資料與特徵都不完全相同，最後以多數決 (分類) 或平均 (回歸) 給出更穩健的預測。</p>
<h2 id="模型介紹">模型介紹</h2>
<h3 id="模型邏輯與核心概念">模型邏輯與核心概念</h3>
<ul>
<li>Bagging (Bootstrap Aggregating): 對原始訓練集做 有放回抽樣，為每棵樹準備一份不同的訓練子集；未被抽到的樣本稱 OOB (Out-of-Bag)，可用來近似泛化誤差。</li>
<li>隨機特徵子集 (max_features): 每個節點分裂時，僅在隨機抽出的特徵子集中尋找最佳分裂，打破樹之間的強相關，進一步降低方差。</li>
<li>投票 / 平均: 分類任務以多數決投票；回歸任務取平均值。</li>
<li>偏差—方差權衡: 相較單棵樹，隨機森林以增加偏差換取顯著降低方差，整體泛化表現通常更佳且更穩定。</li>
</ul>
<h3 id="模型建構說明">模型建構說明</h3>
<ul>
<li>基學習器: 通常使用未剪枝或淺剪枝的 DecisionTree(Classifier|Regressor)。</li>
<li>訓練流程 (分類為例)
<ul>
<li>進行 B 次 bootstrap 抽樣，得到 B 個訓練子集；</li>
<li>對於第 b 棵樹，每個節點僅在 max_features 個隨機特徵中找最佳分裂；</li>
<li>訓練完成後，以 多數決 聚合各樹的預測；</li>
<li>可用 OOB 樣本估計泛化表現 (oob_score_)。</li>
</ul>
</li>
<li>重要超參數 (分類)
<ul>
<li>n_estimators: 樹的數量 (越多越穩，但成本上升)</li>
<li>max_depth、min_samples_leaf: 限制複雜度，抑制過擬合</li>
<li>max_features: 每次分裂可用特徵數 (分類預設 sqrt(p) 常為穩健選擇)</li>
<li>class_weight: 處理類別不平衡</li>
<li>oob_score: 啟用 OOB 估計</li>
</ul>
</li>
</ul>
<h3 id="模型優缺點">模型優缺點</h3>
<table>
  <thead>
      <tr>
          <th>優點</th>
          <th>缺點</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>對高維與雜訊相對穩健，較不易過擬合 (相對單樹)</td>
          <td>訓練與推論成本高於單樹，難以極致壓縮</td>
      </tr>
      <tr>
          <td>幾乎不需特徵縮放，能處理數值＋類別混合</td>
          <td>全模型可解釋性較低 (可用特徵重要度、Permutation Importance 緩解)</td>
      </tr>
      <tr>
          <td>內建 OOB 評估、特徵重要度</td>
          <td>對極度不平衡資料仍可能偏向多數類 (需調 class_weight 或重抽樣)</td>
      </tr>
      <tr>
          <td>易於平行化、對超參數敏感度相對低</td>
          <td>單棵樹可視覺化但「整體」難以直觀解釋</td>
      </tr>
  </tbody>
</table>
<h2 id="模型實作">模型實作</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">OneHotEncoder</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">classification_report</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">roc_auc_score</span><span class="p">,</span> <span class="n">average_precision_score</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">sklearn.inspection</span> <span class="kn">import</span> <span class="n">permutation_importance</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 1) 載入資料（無需外部檔案）</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&#34;titanic&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2) 目標與特徵（seaborn titanic 欄位）</span>
</span></span><span class="line"><span class="cl"><span class="n">target</span> <span class="o">=</span> <span class="s2">&#34;survived&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">num_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;age&#34;</span><span class="p">,</span> <span class="s2">&#34;fare&#34;</span><span class="p">,</span> <span class="s2">&#34;pclass&#34;</span><span class="p">,</span> <span class="s2">&#34;sibsp&#34;</span><span class="p">,</span> <span class="s2">&#34;parch&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">cat_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;sex&#34;</span><span class="p">,</span> <span class="s2">&#34;class&#34;</span><span class="p">,</span> <span class="s2">&#34;embarked&#34;</span><span class="p">,</span> <span class="s2">&#34;who&#34;</span><span class="p">,</span> <span class="s2">&#34;adult_male&#34;</span><span class="p">,</span> <span class="s2">&#34;alone&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">num_features</span> <span class="o">+</span> <span class="n">cat_features</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">target</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 3) 前處理：數值補中位數、類別補眾數 + One-Hot</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">numeric_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="s2">&#34;imputer&#34;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&#34;median&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">categorical_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="s2">&#34;imputer&#34;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&#34;most_frequent&#34;</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="s2">&#34;onehot&#34;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s2">&#34;ignore&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">preprocess</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="s2">&#34;num&#34;</span><span class="p">,</span> <span class="n">numeric_transformer</span><span class="p">,</span> <span class="n">num_features</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">cat_features</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 4) 隨機森林模型</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">rf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">n_estimators</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">max_depth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">min_samples_leaf</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">max_features</span><span class="o">=</span><span class="s2">&#34;sqrt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">class_weight</span><span class="o">=</span><span class="s2">&#34;balanced&#34;</span><span class="p">,</span>   <span class="c1"># Titanic 類別略不平衡</span>
</span></span><span class="line"><span class="cl">    <span class="n">oob_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&#34;preprocess&#34;</span><span class="p">,</span> <span class="n">preprocess</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                      <span class="p">(</span><span class="s2">&#34;model&#34;</span><span class="p">,</span> <span class="n">rf</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 5) 切分資料與訓練</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pipe</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 6) 評估指標</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">y_pred</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">y_proba</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Test Accuracy:&#34;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ROC-AUC:&#34;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;PR-AUC (Average Precision):&#34;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">average_precision_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_proba</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rf_model</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&#34;model&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">rf_model</span><span class="p">,</span> <span class="s2">&#34;oob_score_&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;OOB Score:&#34;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">rf_model</span><span class="o">.</span><span class="n">oob_score_</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 7) 取得「展開後特徵名」</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    - 與模型看到的列數對齊，避免長度不一致錯誤</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># One-Hot 展開後的類別名稱</span>
</span></span><span class="line"><span class="cl"><span class="n">ohe</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&#34;preprocess&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">named_transformers_</span><span class="p">[</span><span class="s2">&#34;cat&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&#34;onehot&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">ohe_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ohe</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(</span><span class="n">cat_features</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">all_feature_names</span> <span class="o">=</span> <span class="n">num_features</span> <span class="o">+</span> <span class="n">ohe_names</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 與模型實際特徵數對齊（保險做法）</span>
</span></span><span class="line"><span class="cl"><span class="n">n_model_features</span> <span class="o">=</span> <span class="n">rf_model</span><span class="o">.</span><span class="n">n_features_in_</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_feature_names</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n_model_features</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 若 ColumnTransformer 產生的欄位數與推定不一致（理論上不會），則切齊</span>
</span></span><span class="line"><span class="cl">    <span class="n">all_feature_names</span> <span class="o">=</span> <span class="n">all_feature_names</span><span class="p">[:</span><span class="n">n_model_features</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 8) 特徵重要度（MDI）</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">mdi_importance</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;feature&#34;</span><span class="p">:</span> <span class="n">all_feature_names</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;importance&#34;</span><span class="p">:</span> <span class="n">rf_model</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">all_feature_names</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&#34;importance&#34;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Top MDI Importances:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">mdi_importance</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 9) Permutation Importance（在「前處理後特徵空間」計算）</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    這樣 perm.importances_* 的長度就會與 all_feature_names 完全一致</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----------------------------</span>
</span></span><span class="line"><span class="cl"><span class="n">X_test_trans</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&#34;preprocess&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>  <span class="c1"># 稀疏或稠密皆可</span>
</span></span><span class="line"><span class="cl"><span class="n">estimator</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&#34;model&#34;</span><span class="p">]</span>  <span class="c1"># 直接用 RF 在 transformed space 上做 PI</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">perm</span> <span class="o">=</span> <span class="n">permutation_importance</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">estimator</span><span class="p">,</span> <span class="n">X_test_trans</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">n_repeats</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">perm_importance</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;feature&#34;</span><span class="p">:</span> <span class="n">all_feature_names</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;importance_mean&#34;</span><span class="p">:</span> <span class="n">perm</span><span class="o">.</span><span class="n">importances_mean</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">all_feature_names</span><span class="p">)],</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;importance_std&#34;</span><span class="p">:</span> <span class="n">perm</span><span class="o">.</span><span class="n">importances_std</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">all_feature_names</span><span class="p">)],</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&#34;importance_mean&#34;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Top Permutation Importances (transformed space):&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">perm_importance</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="執行結果">執行結果</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Test Accuracy: 0.8324
</span></span><span class="line"><span class="cl">              precision    recall  f1-score   support
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           0     0.8509    0.8818    0.8661       110
</span></span><span class="line"><span class="cl">           1     0.8000    0.7536    0.7761        69
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    accuracy                         0.8324       179
</span></span><span class="line"><span class="cl">   macro avg     0.8254    0.8177    0.8211       179
</span></span><span class="line"><span class="cl">weighted avg     0.8313    0.8324    0.8314       179
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ROC-AUC: 0.8515
</span></span><span class="line"><span class="cl">PR-AUC (Average Precision): 0.8335
</span></span><span class="line"><span class="cl">OOB Score: 0.8216
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Top MDI Importances:
</span></span><span class="line"><span class="cl">         feature  importance
</span></span><span class="line"><span class="cl">            fare    0.194484
</span></span><span class="line"><span class="cl">             age    0.145927
</span></span><span class="line"><span class="cl">adult_male_False    0.115839
</span></span><span class="line"><span class="cl"> adult_male_True    0.080458
</span></span><span class="line"><span class="cl">      sex_female    0.075092
</span></span><span class="line"><span class="cl">         who_man    0.074631
</span></span><span class="line"><span class="cl">          pclass    0.047228
</span></span><span class="line"><span class="cl">        sex_male    0.046897
</span></span><span class="line"><span class="cl">           sibsp    0.037505
</span></span><span class="line"><span class="cl">     class_Third    0.035858
</span></span><span class="line"><span class="cl">       who_woman    0.029911
</span></span><span class="line"><span class="cl">     class_First    0.025534
</span></span><span class="line"><span class="cl">           parch    0.022043
</span></span><span class="line"><span class="cl">      embarked_S    0.017173
</span></span><span class="line"><span class="cl">      embarked_C    0.011033
</span></span><span class="line"><span class="cl">    class_Second    0.010601
</span></span><span class="line"><span class="cl">     alone_False    0.009373
</span></span><span class="line"><span class="cl">      alone_True    0.007693
</span></span><span class="line"><span class="cl">      embarked_Q    0.006361
</span></span><span class="line"><span class="cl">       who_child    0.006358
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Top Permutation Importances (transformed space):
</span></span><span class="line"><span class="cl">         feature  importance_mean  importance_std
</span></span><span class="line"><span class="cl">            fare         0.070950        0.013466
</span></span><span class="line"><span class="cl">             age         0.031285        0.014823
</span></span><span class="line"><span class="cl"> adult_male_True         0.021788        0.008815
</span></span><span class="line"><span class="cl">adult_male_False         0.021788        0.008815
</span></span><span class="line"><span class="cl">         who_man         0.021788        0.008815
</span></span><span class="line"><span class="cl">      embarked_S         0.012849        0.006634
</span></span><span class="line"><span class="cl">     class_Third         0.006145        0.008076
</span></span><span class="line"><span class="cl">      embarked_C         0.005587        0.002498
</span></span><span class="line"><span class="cl">        sex_male         0.005587        0.004327
</span></span><span class="line"><span class="cl">       who_woman         0.005028        0.005833
</span></span><span class="line"><span class="cl">           sibsp         0.004469        0.007821
</span></span><span class="line"><span class="cl">      sex_female         0.003911        0.005028
</span></span><span class="line"><span class="cl">       who_child         0.003352        0.003706
</span></span><span class="line"><span class="cl">           parch         0.002793        0.005151
</span></span><span class="line"><span class="cl">      embarked_Q         0.001676        0.003577
</span></span><span class="line"><span class="cl">          pclass        -0.000559        0.010133
</span></span><span class="line"><span class="cl">    class_Second        -0.004469        0.006017
</span></span><span class="line"><span class="cl">      alone_True        -0.005028        0.009497
</span></span><span class="line"><span class="cl">     class_First        -0.006704        0.008939
</span></span><span class="line"><span class="cl">     alone_False        -0.008939        0.008727
</span></span></code></pre></div><h4 id="結果評估">結果評估</h4>
<ul>
<li>整體表現
<ul>
<li>測試集 Accuracy=0.8324，相較於單棵決策樹的 0.8268 有小幅提升，且 ROC-AUC=0.8515、PR-AUC=0.8335 顯示模型在排序與正類預測能力上更穩定。OOB 分數 0.8216 與測試集表現接近，顯示隨機森林在控制方差與避免過擬合上運作正常。</li>
</ul>
</li>
<li>類別分析
<ul>
<li>負類 (未存活) Precision=0.8509、Recall=0.8818，正類 (存活) Precision=0.8000、Recall=0.7536，雖然正類召回率較單棵樹略高，但仍有 約 24.6% 的存活樣本被誤判為未存活，在成本敏感場景下 (漏抓正類成本高) 仍需改善。</li>
</ul>
</li>
<li>特徵重要度觀察
<ul>
<li>MDI (樹內部的 Gini 減少量): fare、age、adult_male_False/True、sex_female、who_man 是主要決策依據，且重要度分佈較單棵樹分散，顯示森林結構引入更多多樣化特徵分裂。</li>
<li>Permutation Importance (泛化貢獻): fare 與 age 在測試集的實際貢獻最高，其餘特徵影響幅度顯著降低，甚至有部分特徵出現負值 (打亂該特徵反而略提升模型表現，代表該特徵在測試集可能引入雜訊)。這提醒我們 MDI 可能高估某些特徵的作用，需同時參考兩種方法做解讀。</li>
</ul>
</li>
</ul>
<h4 id="下一步建議">下一步建議</h4>
<ul>
<li>提升正類召回率
<ul>
<li>調整決策閾值 (predict_proba 輸出)，在 Precision 與 Recall 間找到業務可接受的平衡。</li>
<li>結合 class_weight 微調 (如 {0:1, 1:1.5}) 強化正類權重，觀察召回率與 FPR 的變化。</li>
</ul>
</li>
<li>進一步驗證特徵貢獻
<ul>
<li>對前五大特徵 (fare、age、adult_male、sex_female、who_man) 繪製 Partial Dependence Plot (PDP) 或 Individual Conditional Expectation (ICE)，檢查模型對特徵變化的響應是否符合邏輯與領域知識。</li>
<li>移除 Permutation Importance 為負值的特徵，重新訓練模型，比較 AUC 與穩定性。</li>
</ul>
</li>
<li>模型穩定性檢驗
<ul>
<li>使用 Stratified K-Fold (k=5 或 10) 交叉驗證回報平均值與標準差，量化隨機森林在不同資料切分下的波動性。</li>
<li>檢查 OOB 與交叉驗證分數的差距，確保模型泛化能力穩定。</li>
</ul>
</li>
<li>集成與對照實驗
<ul>
<li>與 Gradient Boosting (XGBoost、LightGBM、CatBoost) 比較，特別是在正類召回率與 PR-AUC 上的表現。</li>
<li>若業務需求重視可解釋性，可建立 surrogate decision tree 模型近似隨機森林的決策邏輯，協助非技術人員理解。</li>
</ul>
</li>
</ul>
<h2 id="結語">結語</h2>
<p>隨機森林作為一種集成學習方法，在本篇示例中展現了穩健的泛化能力與優異的整體效能。透過 Bagging 與 隨機特徵子抽樣，它有效降低了單棵決策樹易受資料擾動影響的缺點，並減少了過擬合的風險。與單樹相比，隨機森林在測試集的 Accuracy、ROC-AUC、PR-AUC 及穩定性上皆有顯著提升，且 OOB 分數與測試表現接近，反映出其在實務環境中的可靠性。</p>
<p>在實務應用中，隨機森林適合用於需要 快速獲得高表現基準模型 (Strong Baseline)  的情境，例如金融風控、醫療診斷、客戶行為預測等。它對資料前處理的要求低、能處理數值與類別混合特徵、且具備穩定性，特別適合在專案初期作為效能與穩健性的參考標竿。未來若需追求更高的精度或更細緻的可解釋性，可以在隨機森林基線上延伸至梯度提升樹 (XGBoost、LightGBM、CatBoost) 或結合 模型解釋技術 (PDP、SHAP)，在效能與理解之間找到最適平衡點。</p>
<h2 id="備註">備註</h2>
<ul>
<li>同步發表於 <a href="https://ithelp.ithome.com.tw/users/20163705/ironman/8136">iThome 鐵人賽 2025 - 30 天入門常見的機器學習演算法</a></li>
</ul>

        </div>
    
        <div class="post__share">
  <div class="share__head">
    <div class="share__title">Share this article</div>
  </div>
  <ul class="share__list list-reset">
    <li class="share__item">
      <a class="share__link share__facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftwcch.io%2fposts%2fcolumn_article%2fironman_2025_30%25E5%25A4%25A9%25E5%2585%25A5%25E9%2596%2580%25E5%25B8%25B8%25E8%25A6%258B%25E7%259A%2584%25E6%25A9%259F%25E5%2599%25A8%25E5%25AD%25B8%25E7%25BF%2592%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595%2farticles_25081301%2f"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Facebook" rel="nofollow"><i class="ion ion-logo-facebook"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__twitter" href="https://twitter.com/intent/tweet?text=%28Day%2015%29%20%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97%20%28Random%20Forest%29&url=http%3a%2f%2ftwcch.io%2fposts%2fcolumn_article%2fironman_2025_30%25E5%25A4%25A9%25E5%2585%25A5%25E9%2596%2580%25E5%25B8%25B8%25E8%25A6%258B%25E7%259A%2584%25E6%25A9%259F%25E5%2599%25A8%25E5%25AD%25B8%25E7%25BF%2592%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595%2farticles_25081301%2f" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter" rel="nofollow"><i class="ion ion-logo-twitter"></i></a>
    </li>

    <li class="share__item">
      <a class="share__link share__linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2ftwcch.io%2fposts%2fcolumn_article%2fironman_2025_30%25E5%25A4%25A9%25E5%2585%25A5%25E9%2596%2580%25E5%25B8%25B8%25E8%25A6%258B%25E7%259A%2584%25E6%25A9%259F%25E5%2599%25A8%25E5%25AD%25B8%25E7%25BF%2592%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595%2farticles_25081301%2f&title=%28Day%2015%29%20%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97%20%28Random%20Forest%29&summary=&source=%28Day%2015%29%20%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97%20%28Random%20Forest%29"
      onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn" rel="nofollow"><i class="ion ion-logo-linkedin"></i></a>
    </li>

    <li class="share__item">
      <a class="share__link share__pinterest"
        href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2ftwcch.io%2fposts%2fcolumn_article%2fironman_2025_30%25E5%25A4%25A9%25E5%2585%25A5%25E9%2596%2580%25E5%25B8%25B8%25E8%25A6%258B%25E7%259A%2584%25E6%25A9%259F%25E5%2599%25A8%25E5%25AD%25B8%25E7%25BF%2592%25E6%25BC%2594%25E7%25AE%2597%25E6%25B3%2595%2farticles_25081301%2f&amp;media=http%3a%2f%2ftwcch.io%2fimages%2fpost%2fcommon%2fdata_science_competition_01.png&amp;description=%28Day%2015%29%20%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97%20%28Random%20Forest%29"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Pinterest" aria-label="Share on Pinterest"><i class="ion ion-logo-pinterest"></i></a>
    </li>
  </ul>
</div>

        
        <div class="post__navigation">
          
          <a class="prev" href="http://twcch.io/posts/column_article/ironman_2025_30%E5%A4%A9%E5%85%A5%E9%96%80%E5%B8%B8%E8%A6%8B%E7%9A%84%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92%E6%BC%94%E7%AE%97%E6%B3%95/articles_25081201/" style="background-image: url('./images/post/common/data_science_competition_01.png')">
            <div class="post__nav-box">
              <div class="post__nav post__nav__prev"><i class="ion ion-ios-arrow-back"></i> Previous
                Page</div>
              <h4 class="post__nav__title">(Day 14) 決策樹 (Decision Tree)</h4>
            </div>
          </a>
          
          
        </div>
        

        
          
<div id="disqus_thread" class="post__comments">
  <div id="disqus_empty"></div>
</div>

<script>
  function load_disqus() {
    var disqus_shortname = 'anvod-studio-aditu',
      is_disqus_empty = document.getElementById('disqus_empty'),
      disqus_target = document.getElementById('disqus_thread'),
      disqus_embed = document.createElement('script'),
      disqus_hook = (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]);

    if (disqus_target && is_disqus_empty) {
      disqus_embed.type = 'text/javascript';
      disqus_embed.async = true;
      disqus_embed.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      disqus_hook.appendChild(disqus_embed);
      is_disqus_empty.remove();
    }
  }

  window.addEventListener('scroll', function (e) {
    var currentScroll = document.scrollingElement.scrollTop;
    var disqus_target = document.getElementById('disqus_thread');

    if (disqus_target && (currentScroll > disqus_target.getBoundingClientRect().top - 150)) {
      load_disqus('disqus_shortname');
    }
  }, false);

</script>
<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

        
    
      </article>
      
    </div>
  </div>


</div>




  </main>
  

  <div class="top" title="Top"><i class="ion ion-ios-arrow-up"></i></div>

  




<footer class="footer">

  <div class="container">
    <div class="row">
      <div class="col col-12">
        <div class="footer__inner">
          

<div class="social">
  <ul class="social__list list-reset">
    
    <li class="social__item">
      <a class="social__link" href="https://github.com/twcch" target="_blank" rel="noopener"
        aria-label="Github link"><i class="ion ion-logo-github"></i></a>
    </li>
    
  </ul>
</div>


          <div class="copyright">
            &copy; 2020–2025 <a href="/">志謙&#39;s Blog</a>.
             
          </div>
        </div>
      </div>
    </div>
  </div>

</footer>


  


<script src="/js/scripts.min.0a3f16199071420ff4ff1b00d3a17a82da5457f6cc2e1911abcf6af3455175e1.js"></script>
<script src="/js/common.min.97bf160adbcbe9b0d5bd37c5aa39cb5f1f3a88050b81463847425ffb0387d33e.js"></script>

</body>

</html>